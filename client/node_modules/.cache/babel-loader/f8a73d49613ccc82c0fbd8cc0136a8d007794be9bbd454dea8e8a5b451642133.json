{"ast":null,"code":"import _objectSpread from\"C:/Users/moran/Documents/GitHub/Final-task-client-server-course-car-service-info/frontent/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/moran/Documents/GitHub/Final-task-client-server-course-car-service-info/frontent/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/moran/Documents/GitHub/Final-task-client-server-course-car-service-info/frontent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/moran/Documents/GitHub/Final-task-client-server-course-car-service-info/frontent/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import md5 from'md5';import{resetPasswordSchema}from'Validations/FormsValidation';import{yupResolver}from'@hookform/resolvers/yup';import{useForm}from'react-hook-form';import{useNavigate}from'react-router-dom';import{Modal,Button}from\"react-bootstrap\";import'bootstrap/dist/css/bootstrap.min.css';import'./ResetPassword.css';/* ResetPassword Component */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResetPassword=function ResetPassword(){var _errors$email,_errors$password,_errors$repeatPasswor;var navigate=useNavigate();/* define hook to navigate to other pages */var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShow=_useState2[1];/*define state for the modal box */var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),msgModal=_useState4[0],setMsgModal=_useState4[1];/*define state for the message modal box */ /* function that close the modal and reset the message modal*/var handleClose=function handleClose(){setShow(false);setMsgModal('');};/* function that open the modal and displays it*/var handleShow=function handleShow(){setShow(true);};/* function that navigates to the log in page */var handleClickLogIn=function handleClickLogIn(){navigate('/logIn');};/* function that navigates to the home page */var handleClickHome=function handleClickHome(){navigate('/');};/* define useForm for the resetPassword form */var _useForm=useForm({resolver:yupResolver(resetPasswordSchema),/* validate the form with the schema */mode:\"onChange\"/* validate the form on change */}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;/* function that submit the form and send the data to the server*/var submitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var requestMsg,response,responseData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:/* define the request message */requestMsg={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({title:'ResetPassword',email:data.email,password:md5(data.password)})};console.log(\"requesting\");_context.next=4;return fetch('/resetPassword',requestMsg);case 4:response=_context.sent;/* send the data to the server */console.log(response);if(response.ok){_context.next=10;break;}/* if the response is not ok, alert the user */setMsgModal('Invalid Details.');handleShow();return _context.abrupt(\"return\");case 10:_context.next=12;return response.json();case 12:responseData=_context.sent;/* retrieve the response data */console.log(responseData);setMsgModal('Updated.');/* alert the user */handleShow();handleClickLogIn();/* navigate to the log in page */case 17:case\"end\":return _context.stop();}},_callee);}));return function submitForm(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-10 col-lg-12 col-md-9\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card o-hidden border-0 shadow-lg my-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 d-none d-lg-block bg-reset-password-image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"h4 text-gray-900 mb-4\",children:\"Reset Password!\"})}),/*#__PURE__*/_jsxs(\"form\",{className:\"user\",onSubmit:handleSubmit(submitForm),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"email\",className:\"form-control form-control-user\",name:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter Email Address...\"},register('email'))),errors.email?/*#__PURE__*/_jsx(\"p\",{className:\"error-msg\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}):/*#__PURE__*/_jsx(\"p\",{className:\"space2\",children:'.'}),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",className:\"form-control form-control-user\",name:\"password\",placeholder:\"Password\"},register('password'))),errors.password?/*#__PURE__*/_jsx(\"p\",{className:\"error-msg\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message}):/*#__PURE__*/_jsx(\"p\",{className:\"space2\",children:'.'}),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",className:\"form-control form-control-user\",name:\"repeatPassword\",placeholder:\"Repeat Password\"},register('repeatPassword'))),errors.repeatPassword?/*#__PURE__*/_jsx(\"p\",{className:\"error-msg\",children:(_errors$repeatPasswor=errors.repeatPassword)===null||_errors$repeatPasswor===void 0?void 0:_errors$repeatPasswor.message}):/*#__PURE__*/_jsx(\"p\",{className:\"space2\",children:'.'}),\" \"]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-primary btn-user btn-block\",value:'Reset Password'})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"a\",{className:\"small cursor-pointer\",onClick:handleClickHome,children:\"Disscare\"})})]})})]})})})})}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{className:\"msg-modal-title\",children:\"ALERT!\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"p\",{className:\"msg-modal\",children:msgModal})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"})})]})]});};export default ResetPassword;","map":{"version":3,"names":["React","useState","md5","resetPasswordSchema","yupResolver","useForm","useNavigate","Modal","Button","ResetPassword","navigate","showModal","setShow","msgModal","setMsgModal","handleClose","handleShow","handleClickLogIn","handleClickHome","resolver","mode","register","handleSubmit","errors","formState","submitForm","data","requestMsg","method","headers","body","JSON","stringify","title","email","password","console","log","fetch","response","ok","json","responseData","message","repeatPassword"],"sources":["C:/Users/moran/Documents/GitHub/Final-task-client-server-course-car-service-info/frontent/src/components/ResetPassword/ResetPassword.jsx"],"sourcesContent":["import React,{useState} from 'react';\r\nimport md5 from 'md5';\r\nimport {resetPasswordSchema } from 'Validations/FormsValidation';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Modal, Button } from \"react-bootstrap\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './ResetPassword.css';\r\n\r\n/* ResetPassword Component */\r\nconst ResetPassword = () => {\r\n\r\n    const navigate = useNavigate(); /* define hook to navigate to other pages */\r\n    const [showModal, setShow] = useState(false);/*define state for the modal box */\r\n    const [msgModal, setMsgModal] = useState('');/*define state for the message modal box */\r\n\r\n    /* function that close the modal and reset the message modal*/\r\n    const handleClose = () =>{\r\n        setShow(false);\r\n        setMsgModal('');\r\n   }\r\n   /* function that open the modal and displays it*/\r\n   const handleShow = () =>{\r\n       setShow(true);\r\n   }\r\n\r\n    /* function that navigates to the log in page */\r\n    const handleClickLogIn = () => {\r\n        navigate('/logIn');\r\n    };\r\n\r\n    /* function that navigates to the home page */\r\n    const handleClickHome = () => {\r\n        navigate('/');\r\n    };\r\n\r\n    /* define useForm for the resetPassword form */\r\n    const { register, handleSubmit, formState: { errors }} = useForm({\r\n        resolver: yupResolver(resetPasswordSchema), /* validate the form with the schema */\r\n        mode: \"onChange\" /* validate the form on change */\r\n    });\r\n\r\n    /* function that submit the form and send the data to the server*/\r\n    const submitForm = async (data) => {\r\n\r\n        /* define the request message */\r\n        const requestMsg = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(\r\n                {\r\n                    title:       'ResetPassword',\r\n                    email:        data.email,\r\n                    password:     md5(data.password)\r\n                })\r\n        };\r\n        console.log(\"requesting\");\r\n\r\n        const response = await fetch('/resetPassword', requestMsg) /* send the data to the server */\r\n        console.log(response);\r\n        if (!response.ok) { /* if the response is not ok, alert the user */\r\n            setMsgModal('Invalid Details.');\r\n            handleShow();\r\n            return;\r\n        }\r\n        const responseData = await response.json(); /* retrieve the response data */\r\n        console.log(responseData);\r\n        setMsgModal('Updated.');/* alert the user */\r\n        handleShow();\r\n        handleClickLogIn(); /* navigate to the log in page */\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\">\r\n\r\n            <div className=\"row justify-content-center\">\r\n                <div className=\"col-xl-10 col-lg-12 col-md-9\">\r\n                    <div className=\"card o-hidden border-0 shadow-lg my-5\">\r\n                        <div className=\"card-body p-0\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-lg-6 d-none d-lg-block bg-reset-password-image\"></div>\r\n                                <div className=\"col-lg-6\">\r\n                                    <div className=\"p-5\">\r\n                                        <div className=\"text-center\">\r\n                                            <h1 className=\"h4 text-gray-900 mb-4\">Reset Password!</h1>\r\n                                        </div>\r\n                                        <form className=\"user\" onSubmit={handleSubmit(submitForm)}>\r\n                                            <div className=\"form-group\">\r\n                                                <input type=\"email\" className=\"form-control form-control-user\"\r\n                                                    name=\"email\" aria-describedby=\"emailHelp\"\r\n                                                    placeholder=\"Enter Email Address...\" {...register('email')}/>\r\n                                                {errors.email ? <p className='error-msg'>{errors.email?.message}</p> : <p className='space2'>{'.'}</p>} {/* display error message if the email is not valid */}\r\n                                                <input type=\"password\" className=\"form-control form-control-user\"\r\n                                                    name=\"password\" placeholder=\"Password\" {...register('password')}/>\r\n                                                {errors.password ? <p className='error-msg'>{errors.password?.message}</p> : <p className='space2'>{'.'}</p>} {/* display error message if the password is not valid */}\r\n                                                <input type=\"password\" className=\"form-control form-control-user\"\r\n                                                    name=\"repeatPassword\" placeholder=\"Repeat Password\" {...register('repeatPassword')}/>\r\n                                                {errors.repeatPassword ? <p className='error-msg'>{errors.repeatPassword?.message}</p> : <p className='space2'>{'.'}</p>} {/* display error message if the repeat password is not valid */}\r\n                                            </div>\r\n                                            <input type=\"submit\" className=\"btn btn-primary btn-user btn-block\" value={'Reset Password'}></input>\r\n                                        </form>\r\n                                        <hr/>\r\n                                        <div className=\"text-center\">\r\n                                            <a className=\"small cursor-pointer\" onClick={handleClickHome}>Disscare</a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <Modal show={showModal} onHide={handleClose}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title className='msg-modal-title'>ALERT!</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body><p className='msg-modal'>{msgModal}</p></Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleClose}>\r\n                        Close\r\n                    </Button>\r\n                    \r\n                </Modal.Footer>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ResetPassword;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}