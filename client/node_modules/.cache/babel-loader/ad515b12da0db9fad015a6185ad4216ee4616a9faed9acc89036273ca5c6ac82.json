{"ast":null,"code":"import _objectSpread from\"C:/Users/moran/Documents/GitHub/Final-task-client-server-course-car-service-info/frontent/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/moran/Documents/GitHub/Final-task-client-server-course-car-service-info/frontent/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/moran/Documents/GitHub/Final-task-client-server-course-car-service-info/frontent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/moran/Documents/GitHub/Final-task-client-server-course-car-service-info/frontent/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{forgotPasswordSchema}from'Validations/FormsValidation';import{yupResolver}from'@hookform/resolvers/yup';import{useForm}from'react-hook-form';import{useNavigate}from'react-router-dom';import{Modal,Button}from\"react-bootstrap\";import'bootstrap/dist/css/bootstrap.min.css';import'./ForgotPassword.css';/* Forgot Password Component */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ForgotPassword=function ForgotPassword(){var _errors$email;var navigate=useNavigate();/* define hook to navigate to other pages */var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShow=_useState2[1];/*define state for the modal box */var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),msgModal=_useState4[0],setMsgModal=_useState4[1];/*define state for the message modal box */ /* function that navigate to the signUp page */var handleClickSignUp=function handleClickSignUp(){navigate('/signUp');};/* function that close the modal and reset the message modal*/var handleClose=function handleClose(){setShow(false);if(msgModal==='Sent! Check your mail.'){setMsgModal('');handleClickHome();}setMsgModal('');};/* function that open the modal and displays it*/var handleShow=function handleShow(){setShow(true);};/* function that navigate to the logIn page */var handleClickLogIn=function handleClickLogIn(){navigate('/logIn');};/* function that navigate to the home page */var handleClickHome=function handleClickHome(){navigate('/');};/* define useForm for the forgotPassword form */var _useForm=useForm({resolver:yupResolver(forgotPasswordSchema),/* validate the form with the schema */mode:\"onChange\"/* validate the form on change */}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;/* function that submit the form and send the data to the server */var submitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var requestMsg,response,responseData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:/* define the request message */requestMsg={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({title:'ForgotPassword',email:data.email})};console.log(\"requesting\");/* send the request to the server */_context.next=4;return fetch('/forgotPassword',requestMsg);case 4:response=_context.sent;console.log(response);if(response.ok){_context.next=10;break;}/* if the response is not ok, alert the user */setMsgModal('Invalid Details');/* if the response is not ok, alert the user */handleShow();return _context.abrupt(\"return\");case 10:_context.next=12;return response.json();case 12:responseData=_context.sent;console.log(responseData);setMsgModal('Sent! Check your mail.');/* if the response is not ok, alert the user */handleShow();case 16:case\"end\":return _context.stop();}},_callee);}));return function submitForm(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-10 col-lg-12 col-md-9\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card o-hidden border-0 shadow-lg my-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 d-none d-lg-block bg-forgot-password-image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h4 text-gray-900 mb-2\",children:\"Forgot Your Password?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 forgot-password-data-label\",children:\"We get it, stuff happens. Just enter your email address below and we'll send you a link to reset your password!\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"user\",onSubmit:handleSubmit(submitForm),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"email\",className:\"form-control form-control-user\",name:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter Email Address...\"},register('email'))),errors.email?/*#__PURE__*/_jsx(\"p\",{className:\"error-msg\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}):/*#__PURE__*/_jsx(\"br\",{}),\" \"]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-primary btn-user btn-block\",value:'Reset Password'}),\" \"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"a\",{className:\"small cursor-pointer\",onClick:handleClickSignUp,children:\"Create an Account!\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"a\",{className:\"small cursor-pointer\",onClick:handleClickLogIn,children:\"Already have an account? Login!\"})})]})})]})})})})}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{className:\"msg-modal-title\",children:\"ALERT!\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"p\",{className:\"msg-modal\",children:msgModal})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"})})]})]});};export default ForgotPassword;","map":{"version":3,"names":["React","useState","forgotPasswordSchema","yupResolver","useForm","useNavigate","Modal","Button","ForgotPassword","navigate","showModal","setShow","msgModal","setMsgModal","handleClickSignUp","handleClose","handleClickHome","handleShow","handleClickLogIn","resolver","mode","register","handleSubmit","errors","formState","submitForm","data","requestMsg","method","headers","body","JSON","stringify","title","email","console","log","fetch","response","ok","json","responseData","message"],"sources":["C:/Users/moran/Documents/GitHub/Final-task-client-server-course-car-service-info/frontent/src/components/ForgotPassword/ForgotPassword.jsx"],"sourcesContent":["import React,{useState} from 'react';\r\nimport { forgotPasswordSchema } from 'Validations/FormsValidation';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useNavigate  } from 'react-router-dom';\r\nimport { Modal, Button } from \"react-bootstrap\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './ForgotPassword.css';\r\n\r\n/* Forgot Password Component */\r\nconst ForgotPassword = () => {\r\n\r\n    const navigate = useNavigate(); /* define hook to navigate to other pages */\r\n    const [showModal, setShow] = useState(false);/*define state for the modal box */\r\n    const [msgModal, setMsgModal] = useState('');/*define state for the message modal box */\r\n\r\n    /* function that navigate to the signUp page */\r\n    const handleClickSignUp = () => {\r\n        navigate('/signUp');\r\n    };\r\n\r\n    /* function that close the modal and reset the message modal*/\r\n    const handleClose = () =>{\r\n        setShow(false);\r\n        if(msgModal === 'Sent! Check your mail.') {\r\n            setMsgModal('');\r\n            handleClickHome();\r\n        }\r\n        setMsgModal('');\r\n   }\r\n   /* function that open the modal and displays it*/\r\n   const handleShow = () =>{\r\n       setShow(true);\r\n   }\r\n\r\n    /* function that navigate to the logIn page */\r\n    const handleClickLogIn = () => {\r\n        navigate('/logIn');\r\n    };\r\n\r\n    /* function that navigate to the home page */\r\n    const handleClickHome = () => {\r\n        navigate('/');\r\n    };\r\n\r\n    /* define useForm for the forgotPassword form */\r\n    const { register, handleSubmit, formState: { errors }} = useForm({\r\n        resolver: yupResolver(forgotPasswordSchema), /* validate the form with the schema */\r\n        mode: \"onChange\" /* validate the form on change */\r\n    });\r\n\r\n    /* function that submit the form and send the data to the server */\r\n    const submitForm = async (data) => {\r\n        \r\n        /* define the request message */\r\n        const requestMsg = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(\r\n                {\r\n                    title:     'ForgotPassword',\r\n                    email:     data.email\r\n                })\r\n        };\r\n        console.log(\"requesting\");\r\n\r\n        /* send the request to the server */\r\n        const response = await fetch('/forgotPassword', requestMsg)\r\n        console.log(response);\r\n        if (!response.ok) { /* if the response is not ok, alert the user */\r\n            setMsgModal('Invalid Details');/* if the response is not ok, alert the user */\r\n            handleShow();\r\n            return;\r\n        }\r\n        /* if the response is ok, alert the user */\r\n        const responseData = await response.json();\r\n        console.log(responseData);\r\n        setMsgModal('Sent! Check your mail.');/* if the response is not ok, alert the user */\r\n        handleShow();\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\">\r\n\r\n            <div className=\"row justify-content-center\">\r\n                <div className=\"col-xl-10 col-lg-12 col-md-9\">\r\n                    <div className=\"card o-hidden border-0 shadow-lg my-5\">\r\n                        <div className=\"card-body p-0\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-lg-6 d-none d-lg-block bg-forgot-password-image\"></div>\r\n                                <div className=\"col-lg-6\">\r\n                                    <div className=\"p-5\">\r\n                                        <div className=\"text-center\">\r\n                                            <h1 className=\"h4 text-gray-900 mb-2\">Forgot Your Password?</h1>\r\n                                            <p className=\"mb-4 forgot-password-data-label\">We get it, stuff happens. Just enter your email address below\r\n                                                and we'll send you a link to reset your password!</p>\r\n                                        </div>\r\n                                        <form className=\"user\" onSubmit={handleSubmit(submitForm)}>\r\n                                            <div className=\"form-group\">\r\n                                                <input type=\"email\" className=\"form-control form-control-user\"\r\n                                                    name=\"email\" aria-describedby=\"emailHelp\"\r\n                                                    placeholder=\"Enter Email Address...\" {...register('email')}/>\r\n                                                    {errors.email ? <p className='error-msg'>{errors.email?.message}</p> : <br/>} {/* display error message if the email is not valid */}\r\n                                            </div>\r\n                                            <input type=\"submit\" className=\"btn btn-primary btn-user btn-block\" value={'Reset Password'}></input> {/* submit button */}\r\n                                        </form>\r\n                                        <hr/>\r\n                                        <div className=\"text-center\">\r\n                                            <a className=\"small cursor-pointer\" onClick={handleClickSignUp}>Create an Account!</a>\r\n                                        </div>\r\n                                        <div className=\"text-center\">\r\n                                            <a className=\"small cursor-pointer\" onClick={handleClickLogIn}>Already have an account? Login!</a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            <Modal show={showModal} onHide={handleClose}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title className='msg-modal-title'>ALERT!</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body><p className='msg-modal'>{msgModal}</p></Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleClose}>\r\n                        Close\r\n                    </Button>\r\n                    \r\n                </Modal.Footer>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ForgotPassword;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}